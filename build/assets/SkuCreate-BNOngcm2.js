import{T as z,r as h,j as e,V as G,Q as O,R}from"./index-DYjQbdMU.js";import{u as V,F as W,C as m}from"./index.esm-BkIgB_jw.js";import{t as $,F as o,z as n}from"./index-DVEwXbqM.js";import{I as i}from"./Input-BylJ9_GI.js";import{B as I}from"./Button-COzievky.js";import{C as K}from"./Card-CjT__r-_.js";import{B as Q}from"./BottomStickyBar-BYqsYd8j.js";import{u as Z,A as _}from"./useTimeOutMessage-C8Xr7pyy.js";import"./classNames-ClmOXRvH.js";import"./index-C5Db1Y-3.js";import"./isNil-CkR7oeq0.js";import"./StatusIcon-9mFLQExI.js";import"./index-BFu0nb_6.js";import"./CloseButton-BYCWlGA8.js";const H=t=>n.object({name:n.string().min(4,"Name Required"),email:n.string().nullish(),phone:n.string().nullish(),city:n.string().nullish(),state:n.string().nullish(),address:n.string().nullish(),pin:n.string().nullish(),gstin:n.string().nullish(),username:n.string().min(4,"Too Short!").max(12,"Too Long!"),password:t?n.string().nullish():n.string().min(1,{message:"Password Required"}).min(6,{message:"Too Short!"}).refine(p=>/^[A-Za-z0-9_-]*$/.test(p),"Only Letters & Numbers Allowed")});async function J(t){return R.fetchDataWithAxios({url:"/create-sku",method:"post",data:t})}async function X(t){return R.fetchDataWithAxios({url:`/get-sku/${t}`,method:"get"})}const ue=()=>{var f,y,b,S,v,C,N,B,w,A;const{id:t}=z(),[p,g]=h.useState(!!t),[j,D]=h.useState(null);h.useEffect(()=>{t&&(g(!0),X(t).then(s=>{u(s)}).catch(s=>{var c;D(((c=s==null?void 0:s.response)==null?void 0:c.data)||s.toString())}).finally(()=>{g(!1)}))},[]);const{handleSubmit:L,reset:u,formState:{errors:r},setError:U,control:l}=V({defaultValues:{name:"",email:"",phone:"",city:"",state:"",address:"",pin:"",gstin:"",username:"",password:""},resolver:$(H(t))}),[x,d]=Z(),q=async s=>{var k,M,P,T,E,F;try{t&&(s.id=t);const a=await J(s);a&&(d==null||d({text:(a==null?void 0:a.message)||"Successfully Saved",type:"success"}),t||u())}catch(a){d==null||d({text:((M=(k=a==null?void 0:a.response)==null?void 0:k.data)==null?void 0:M.message)||a.message.toString()||a.toString(),type:"danger"});for(var c in(T=(P=a==null?void 0:a.response)==null?void 0:P.data)==null?void 0:T.errors)U(c,{type:"manual",message:(F=(E=a==null?void 0:a.response)==null?void 0:E.data)==null?void 0:F.errors[c]})}};return j?e.jsx("div",{children:j.message}):e.jsx(e.Fragment,{children:p?e.jsx(G,{loading:!0}):e.jsxs(W,{onSubmit:L(q),children:[e.jsxs(K,{children:[x&&e.jsx(_,{showIcon:!0,className:"mb-4",type:x.type,children:e.jsx("span",{className:"break-all",children:x.text})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{asterisk:!0,label:"Name",invalid:!!r.name,errorMessage:(f=r.name)==null?void 0:f.message,children:e.jsx(m,{name:"name",control:l,render:({field:s})=>e.jsx(i,{type:"text",autoComplete:"off",placeholder:"SKU Name",...s})})}),e.jsx(o,{label:"Email",invalid:!!r.email,errorMessage:(y=r.email)==null?void 0:y.message,children:e.jsx(m,{name:"email",control:l,render:({field:s})=>e.jsx(i,{type:"email",autoComplete:"off",placeholder:"e-mail",...s})})}),e.jsx(o,{label:"Phone",invalid:!!r.phone,errorMessage:(b=r.phone)==null?void 0:b.message,children:e.jsx(m,{name:"phone",control:l,render:({field:s})=>e.jsx(i,{type:"number",autoComplete:"off",placeholder:"Phone Number",...s})})}),e.jsx(o,{label:"City",invalid:!!r.city,errorMessage:(S=r.city)==null?void 0:S.message,children:e.jsx(m,{name:"city",control:l,render:({field:s})=>e.jsx(i,{type:"text",autoComplete:"off",placeholder:"City Name",...s})})}),e.jsx(o,{label:"State",invalid:!!r.state,errorMessage:(v=r.state)==null?void 0:v.message,children:e.jsx(m,{name:"state",control:l,render:({field:s})=>e.jsx(i,{type:"text",autoComplete:"off",placeholder:"State Name",...s})})})]}),e.jsxs("div",{children:[e.jsx(o,{label:"Address",invalid:!!r.address,errorMessage:(C=r.address)==null?void 0:C.message,children:e.jsx(m,{name:"address",control:l,render:({field:s})=>e.jsx(i,{type:"text",autoComplete:"off",placeholder:"Address",...s})})}),e.jsx(o,{label:"Pin",invalid:!!r.pin,errorMessage:(N=r.pin)==null?void 0:N.message,children:e.jsx(m,{name:"pin",control:l,render:({field:s})=>e.jsx(i,{type:"number",autoComplete:"off",placeholder:"Pin Number",...s})})}),e.jsx(o,{label:"GSTIN",invalid:!!r.gstin,errorMessage:(B=r.gstin)==null?void 0:B.message,children:e.jsx(m,{name:"gstin",control:l,render:({field:s})=>e.jsx(i,{type:"text",autoComplete:"off",placeholder:"GSTIN",...s})})}),e.jsx(o,{label:"Â ",children:e.jsx(i,{style:{visibility:"hidden"}})}),e.jsx(o,{asterisk:!0,label:"Username",invalid:!!r.username,errorMessage:(w=r.username)==null?void 0:w.message,children:e.jsx(m,{name:"username",control:l,render:({field:s})=>e.jsx(i,{type:"text",autoComplete:"off",placeholder:"Username",...s})})}),e.jsx(o,{asterisk:!0,label:"Password",invalid:!!r.password,errorMessage:(A=r.password)==null?void 0:A.message,children:e.jsx(m,{name:"password",control:l,render:({field:s})=>e.jsx(i,{type:"password",autoComplete:"off",placeholder:"Password",...s})})})]})]})]}),e.jsx(Q,{children:e.jsx(O,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx("span",{}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{type:"reset",className:"ltr:mr-2 rtl:ml-2",onClick:()=>u(),children:"Reset"}),e.jsx(I,{variant:"solid",type:"submit",children:"Submit"})]})]})})})]})})};export{ue as default};
