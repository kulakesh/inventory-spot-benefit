import{r as P,u as v,j as e,c as F}from"./index-CuiB96Qo.js";import{u as B,F as C,C as p,I as E}from"./index.esm-CcRkPvbC.js";import{B as q}from"./Button-CXMcmXiq.js";import{F as g,t as N,z as t}from"./index-Djfdile5.js";import{P as _}from"./PasswordInput-DXxD1no4.js";const k=t.object({email:t.string({required_error:"Please enter your email"}).min(1,{message:"Please enter your email"}),password:t.string({required_error:"Please enter your password"}).min(1,{message:"Please enter your password"})}),V=f=>{var d,u,c;const[i,n]=P.useState(!1),{disableSubmit:x=!1,className:b,setMessage:o,passwordHint:l,authority:w}=f,{handleSubmit:S,formState:{errors:s},control:m}=B({defaultValues:{},resolver:N(k)}),{signIn:j}=v(),h=async r=>{const{email:y,password:I}=r;if(!x){n(!0);const a=await j({email:y,password:I,authority:w});(a==null?void 0:a.status)==="failed"&&(o==null||o(a.message))}n(!1)};return e.jsx("div",{className:b,children:e.jsxs(C,{onSubmit:S(h),children:[e.jsx(g,{label:"Email",invalid:!!s.email,errorMessage:(d=s.email)==null?void 0:d.message,children:e.jsx(p,{name:"email",control:m,render:({field:r})=>e.jsx(E,{type:"text",placeholder:"Email",autoComplete:"off",...r})})}),e.jsx(g,{label:"Password",invalid:!!s.password,errorMessage:(u=s.password)==null?void 0:u.message,className:F(l?"mb-0":"",(c=s.password)!=null&&c.message?"mb-8":""),children:e.jsx(p,{name:"password",control:m,rules:{required:!0},render:({field:r})=>e.jsx(_,{type:"text",placeholder:"Password",autoComplete:"off",...r})})}),l,e.jsx(q,{block:!0,loading:i,variant:"solid",type:"submit",children:i?"Signing in...":"Sign In"})]})})};export{V as S};
