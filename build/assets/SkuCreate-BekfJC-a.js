import{V as W,r as x,j as e,W as q,R as z,T}from"./index-OsGwFNMQ.js";import{u as O,F as V,C as m,I as o}from"./index.esm-q56EOpBZ.js";import{t as $,F as i,z as n}from"./index-aJEhh47g.js";import{B as R}from"./Button-Dprv1Vtg.js";import{C as K}from"./Card-BwRWn4ID.js";import{B as Z}from"./BottomStickyBar-7QwAEixN.js";import{u as _,A as G}from"./useTimeOutMessage-B7wxTTxJ.js";import"./index-iMehOhD4.js";import"./isNil-D_oaihkx.js";import"./CloseButton-B_ZQ3ENB.js";const H=t=>n.object({name:n.string().min(4,"Name Required"),email:n.string().nullish(),phone:n.string().nullish(),city:n.string().nullish(),state:n.string().nullish(),address:n.string().nullish(),pin:n.string().nullish(),username:n.string().min(4,"Too Short!").max(12,"Too Long!"),password:t?n.string().nullish():n.string().min(1,{message:"Password Required"}).min(6,{message:"Too Short!"}).refine(p=>/^[A-Za-z0-9_-]*$/.test(p),"Only Letters & Numbers Allowed")});async function J(t){return T.fetchDataWithAxios({url:"/create-sku",method:"post",data:t})}async function Q(t){return T.fetchDataWithAxios({url:`/get-sku/${t}`,method:"get"})}const le=()=>{var f,y,b,v,S,C,B,N,w;const{id:t}=W(),[p,j]=x.useState(!!t),[g,D]=x.useState(null);x.useEffect(()=>{t&&(j(!0),Q(t).then(s=>{u(s)}).catch(s=>{var c;D(((c=s==null?void 0:s.response)==null?void 0:c.data)||s.toString())}).finally(()=>{j(!1)}))},[]);const{handleSubmit:I,reset:u,formState:{errors:r},setError:L,control:l}=O({defaultValues:{name:"",email:"",phone:"",city:"",state:"",address:"",pin:"",username:"",password:""},resolver:$(H(t))}),[h,d]=_(),U=async s=>{var A,k,P,M,E,F;try{t&&(s.id=t);const a=await J(s);a&&(d==null||d({text:(a==null?void 0:a.message)||"Successfully Saved",type:"success"}),t||u())}catch(a){d==null||d({text:((k=(A=a==null?void 0:a.response)==null?void 0:A.data)==null?void 0:k.message)||a.message.toString()||a.toString(),type:"danger"});for(var c in(M=(P=a==null?void 0:a.response)==null?void 0:P.data)==null?void 0:M.errors)L(c,{type:"manual",message:(F=(E=a==null?void 0:a.response)==null?void 0:E.data)==null?void 0:F.errors[c]})}};return g?e.jsx("div",{children:g.message}):e.jsx(e.Fragment,{children:p?e.jsx(q,{loading:!0}):e.jsxs(V,{onSubmit:I(U),children:[e.jsxs(K,{children:[h&&e.jsx(G,{showIcon:!0,className:"mb-4",type:h.type,children:e.jsx("span",{className:"break-all",children:h.text})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{asterisk:!0,label:"Name",invalid:!!r.name,errorMessage:(f=r.name)==null?void 0:f.message,children:e.jsx(m,{name:"name",control:l,render:({field:s})=>e.jsx(o,{type:"text",autoComplete:"off",placeholder:"SKU Name",...s})})}),e.jsx(i,{label:"Email",invalid:!!r.email,errorMessage:(y=r.email)==null?void 0:y.message,children:e.jsx(m,{name:"email",control:l,render:({field:s})=>e.jsx(o,{type:"email",autoComplete:"off",placeholder:"e-mail",...s})})}),e.jsx(i,{label:"Phone",invalid:!!r.phone,errorMessage:(b=r.phone)==null?void 0:b.message,children:e.jsx(m,{name:"phone",control:l,render:({field:s})=>e.jsx(o,{type:"number",autoComplete:"off",placeholder:"Phone Number",...s})})}),e.jsx(i,{label:"City",invalid:!!r.city,errorMessage:(v=r.city)==null?void 0:v.message,children:e.jsx(m,{name:"city",control:l,render:({field:s})=>e.jsx(o,{type:"text",autoComplete:"off",placeholder:"City Name",...s})})}),e.jsx(i,{label:"State",invalid:!!r.state,errorMessage:(S=r.state)==null?void 0:S.message,children:e.jsx(m,{name:"state",control:l,render:({field:s})=>e.jsx(o,{type:"text",autoComplete:"off",placeholder:"State Name",...s})})})]}),e.jsxs("div",{children:[e.jsx(i,{label:"Address",invalid:!!r.address,errorMessage:(C=r.address)==null?void 0:C.message,children:e.jsx(m,{name:"address",control:l,render:({field:s})=>e.jsx(o,{type:"text",autoComplete:"off",placeholder:"Address",...s})})}),e.jsx(i,{label:"Pin",invalid:!!r.pin,errorMessage:(B=r.pin)==null?void 0:B.message,children:e.jsx(m,{name:"pin",control:l,render:({field:s})=>e.jsx(o,{type:"number",autoComplete:"off",placeholder:"Pin Number",...s})})}),e.jsx(i,{label:"Â ",children:e.jsx(o,{style:{visibility:"hidden"}})}),e.jsx(i,{asterisk:!0,label:"Username",invalid:!!r.username,errorMessage:(N=r.username)==null?void 0:N.message,children:e.jsx(m,{name:"username",control:l,render:({field:s})=>e.jsx(o,{type:"text",autoComplete:"off",placeholder:"Username",...s})})}),e.jsx(i,{asterisk:!0,label:"Password",invalid:!!r.password,errorMessage:(w=r.password)==null?void 0:w.message,children:e.jsx(m,{name:"password",control:l,render:({field:s})=>e.jsx(o,{type:"password",autoComplete:"off",placeholder:"Password",...s})})})]})]})]}),e.jsx(Z,{children:e.jsx(z,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx("span",{}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{type:"reset",className:"ltr:mr-2 rtl:ml-2",onClick:()=>u(),children:"Reset"}),e.jsx(R,{variant:"solid",type:"submit",children:"Submit"})]})]})})})]})})};export{le as default};
