import{P as y,r as t,u as R,j as e,X as D,c as M,T as z}from"./index-D-Kk4ryf.js";import{T as u}from"./index-DFBOyVtm.js";import{u as A,g as O,a as B,b as E,c as I,T as k,P as Y}from"./index-Dyuc1q5v.js";import{S as H}from"./Select-DTzyaNLD.js";import{e as q,g as F}from"./index-BVQyNV9R.js";import{C as W}from"./Card-BZxOy1KO.js";import{B as c}from"./Button-BXFczxuE.js";import{B as d}from"./Badge-z_ZnhInn.js";import{T as _,A as G}from"./index-guiorj5-.js";import{D as L}from"./Dialog-ZXnm5yPW.js";import{S as Q}from"./ScrollBar-_i73eAQ2.js";import"./classNames-BCTD7tGa.js";import"./useControllableState-CvFLG6Dr.js";import"./floating-ui.dom-DLx_jrkq.js";import"./CloseButton-BJv-qSpg.js";const{Tr:x,Th:i,Td:n,THead:V,TBody:X}=u;async function $(l){return z.fetchDataWithAxios({url:`/get-order-list/${l}`,method:"get"})}const h=[{value:10,label:"10 / page"},{value:20,label:"20 / page"},{value:30,label:"30 / page"},{value:40,label:"40 / page"},{value:50,label:"50 / page"}],J=[e.jsx(d,{className:"mr-4",content:"Pending",innerClass:"bg-white text-gray-500"}),"Deleted",e.jsx(d,{className:"mr-4",content:"Complete",innerClass:"bg-emerald-500"})],ge=()=>{y();const[l,j]=t.useState([]),[p,f]=t.useState(!0),[m,v]=t.useState(null),[o,b]=t.useState([]),[S,r]=t.useState(!1),{user:N}=R();t.useEffect(()=>{$(N.id).then(s=>{j(s)}).catch(s=>{var g;v(((g=s==null?void 0:s.response)==null?void 0:g.data)||s.toString())}).finally(()=>{f(!1)})},[]);const C=l.length,a=A({data:l,getCoreRowModel:I(),getFilteredRowModel:E(),getPaginationRowModel:B(),getSortedRowModel:O()}),P=s=>{a.setPageIndex(s-1)},T=(s=0)=>{a.setPageSize(Number(s))},w=s=>{b(s),r(!0)};return m?e.jsx("div",{children:m.message}):e.jsxs("div",{children:[e.jsxs(W,{children:[e.jsxs(u,{children:[e.jsx(V,{children:e.jsxs(x,{children:[e.jsx(i,{children:"Sl No"}),e.jsx(i,{children:"Amount"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Items"}),e.jsx(i,{children:"Date"}),e.jsx(i,{children:"Action"})]})}),p?e.jsx(k,{columns:6,rows:10,avatarInColumns:[2,3,5],avatarProps:{width:28,height:28}}):e.jsx(X,{children:a.getRowModel().rows.map(s=>e.jsxs(x,{children:[e.jsx(n,{children:s.index+1}),e.jsx(n,{children:s.original.amount}),e.jsx(n,{children:J[s.original.status]}),e.jsx(n,{children:e.jsx("div",{className:"flex items-center",children:e.jsx(d,{className:"mr-2",innerClass:"bg-blue-500",content:s.original.items.length,children:e.jsx(_,{title:"View items",children:e.jsx(c,{onClick:()=>w(s.original.items),shape:"circle",size:"sm",icon:e.jsx(q,{})})})})})}),e.jsx(n,{children:D.unix(s.original.created_at).format("D MMM, YYYY h:mm a")}),e.jsx(n,{children:e.jsx(c,{icon:e.jsx(F,{}),variant:"plain",size:"xs",className:"bg-error text-white"})})]},s.original.id))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx(Y,{pageSize:a.getState().pagination.pageSize,currentPage:a.getState().pagination.pageIndex+1,total:C,onChange:P}),e.jsx("div",{style:{minWidth:130},children:e.jsx(H,{size:"sm",isSearchable:!1,value:h.filter(s=>s.value===a.getState().pagination.pageSize),options:h,onChange:s=>T(s==null?void 0:s.value)})})]})]}),e.jsxs(L,{isOpen:S,onClose:()=>r(!1),onRequestClose:()=>r(!1),children:[e.jsx("div",{className:"text-center mb-6",children:e.jsx("h4",{className:"mb-1",children:"Ordered items"})}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"mb-6",children:e.jsx(Q,{className:M("overflow-y-auto h-80"),children:o==null?void 0:o.map(s=>e.jsxs("div",{className:"py-3 pr-5 rounded-lg flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{size:"lg",shape:"round",src:s.img_url}),e.jsxs("div",{children:[e.jsx("p",{className:"heading-text font-bold",children:s.name}),e.jsxs("p",{children:["Price: â‚¹",s.amount]})]})]})}),e.jsxs("div",{children:["Qnt:",e.jsx("span",{className:"heading-text font-bold",children:s.quantity})]})]},s.id))})})}),e.jsx(c,{block:!0,type:"button",variant:"solid",onClick:()=>r(!1),children:"Close"})]})]})};export{ge as default};
