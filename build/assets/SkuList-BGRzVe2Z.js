import{P as w,r as n,j as e,T as P}from"./index-DeFXqAql.js";import{T as u}from"./index-8Gvt9ER2.js";import{u as R,f as c,T as y,P as M,g as N,a as z,b as D,c as E}from"./index-WOe7mAMs.js";import{S as k}from"./Select-Dr_reZta.js";import{g as H,h as I}from"./index-C2TGNToy.js";import{C as K}from"./Card-DPB7aQRb.js";import{B as d}from"./Button-Ckn6Hxo-.js";import"./useControllableState-PL83ZPJW.js";import"./floating-ui.dom-BhkZb2dT.js";const{Tr:g,Th:o,Td:i,THead:A,TBody:B,Sorter:O}=u;async function F(){return P.fetchDataWithAxios({url:"/list-sku",method:"get"})}const m=[{value:10,label:"10 / page"},{value:20,label:"20 / page"},{value:30,label:"30 / page"},{value:40,label:"40 / page"},{value:50,label:"50 / page"}],X=()=>{const x=w(),[l,h]=n.useState([]),[p,j]=n.useState(!0),[r,S]=n.useState(null);n.useEffect(()=>{F().then(a=>{h(a)}).catch(a=>{S(a)}).finally(()=>{j(!1)})},[]);const f=l.length,v=n.useMemo(()=>[{header:"User ID",accessorKey:"username"},{header:"Name",accessorKey:"name"},{header:"Phone",accessorKey:"phone"},{header:"Email",accessorKey:"email"},{header:"City",accessorKey:"city"}],[]),s=R({data:l,columns:v,getCoreRowModel:E(),getFilteredRowModel:D(),getPaginationRowModel:z(),getSortedRowModel:N()}),b=a=>{x(`/admin/sku/edit/${a.original.id}`)},C=a=>{s.setPageIndex(a-1)},T=(a=0)=>{s.setPageSize(Number(a))};return r?e.jsxs("div",{children:["Error: ",r.message]}):e.jsx("div",{children:e.jsxs(K,{children:[e.jsxs(u,{children:[e.jsx(A,{children:s.getHeaderGroups().map(a=>e.jsxs(g,{children:[e.jsx(o,{className:"w-20",children:"Sl No"}),a.headers.map(t=>e.jsx(o,{colSpan:t.colSpan,children:e.jsxs("div",{className:t.column.getCanSort()?"cursor-pointer select-none":"",onClick:t.column.getToggleSortingHandler(),children:[c(t.column.columnDef.header,t.getContext()),e.jsx(O,{sort:t.column.getIsSorted()})]})},t.id)),e.jsx(o,{children:"Action"})]},a.id))}),p?e.jsx(y,{columns:7,rows:10,avatarInColumns:[0],avatarProps:{width:28,height:28}}):e.jsx(B,{children:s.getRowModel().rows.map(a=>e.jsxs(g,{children:[e.jsx(i,{children:a.index+1}),a.getVisibleCells().map(t=>e.jsx(i,{children:c(t.column.columnDef.cell,t.getContext())},t.id)),e.jsxs(i,{children:[e.jsx(d,{onClick:()=>b(a),icon:e.jsx(H,{}),variant:"solid",size:"xs",className:"mr-2"}),e.jsx(d,{icon:e.jsx(I,{}),variant:"plain",size:"xs",className:"bg-error text-white"})]})]},a.id))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx(M,{pageSize:s.getState().pagination.pageSize,currentPage:s.getState().pagination.pageIndex+1,total:f,onChange:C}),e.jsx("div",{style:{minWidth:130},children:e.jsx(k,{size:"sm",isSearchable:!1,value:m.filter(a=>a.value===s.getState().pagination.pageSize),options:m,onChange:a=>T(a==null?void 0:a.value)})})]})]})})};export{X as default};
