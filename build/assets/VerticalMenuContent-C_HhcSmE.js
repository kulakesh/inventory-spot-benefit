import{r as p,t as g,j as e,z as $,a as _,at as F}from"./index-OsGwFNMQ.js";import{e as L,P as H,n as A,A as M,D,a as Y,u as O,N as z,d as X,f as q}from"./UserProfileDropdown-FI3fWxBd.js";import{a as B}from"./useResponsive-C48QVFZP.js";import{m as T}from"./CloseButton-B_ZQ3ENB.js";import{T as J}from"./index-BDwfJhaP.js";const K=p.createContext({}),Q=K.Provider,U=K.Consumer,W=t=>{const{children:s,className:r,defaultActiveKeys:o=[],defaultExpandedKeys:l=[],defaultCollapseActiveKeys:u=[],menuItemHeight:a=48,onSelect:c,ref:m,sideCollapsed:x=!1,...d}=t,C=g("menu",r);return e.jsx("nav",{ref:m,className:C,...d,children:e.jsx(Q,{value:{onSelect:c,menuItemHeight:a,sideCollapsed:x,defaultExpandedKeys:l,defaultActiveKeys:o,defaultCollapseActiveKeys:u},children:s})})},P=p.createContext(null),Z=P.Provider,R=P.Consumer,G=p.createContext(!1),v=G.Provider,ee=G.Consumer,w=t=>{const{eventKey:s,...r}=t;return e.jsx(U,{children:o=>e.jsx(R,{children:()=>e.jsx(ee,{children:()=>e.jsx(L,{menuItemHeight:o.menuItemHeight,isActive:o.defaultActiveKeys.includes(s),eventKey:s,onSelect:o.onSelect,...r})})})})};w.displayName="MenuItem";const S=t=>{const{active:s,children:r,className:o,eventKey:l,expanded:u=!1,indent:a=!0,label:c=null,dotIndent:m,onToggle:x}=t,[d,n]=p.useState(u),{sideCollapsed:C,defaultExpandedKeys:j,defaultCollapseActiveKeys:I}=p.useContext(K),{direction:h}=$();p.useEffect(()=>{j.includes(l)&&n(!0),u!==d&&n(!0)},[u,l,j]);const N=i=>{typeof x=="function"&&x(!d,i),n(!d)},f=g("menu-collapse-item",(I&&I.includes(l)||s)&&"menu-collapse-item-active",o);return e.jsxs("div",{className:"menu-collapse",children:[e.jsxs("div",{className:f,role:"presentation",onClick:N,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[m&&e.jsx(H,{className:g("text-3xl w-[24px]",!s&&"opacity-25")}),c]}),e.jsx(T.span,{className:"text-lg mt-1",initial:{transform:"rotate(0deg)"},animate:{transform:d?"rotate(-180deg)":"rotate(0deg)"},transition:{duration:.15},children:C?null:e.jsx(B,{})})]}),e.jsx(v,{value:d,children:e.jsx(T.ul,{className:a?h==="rtl"?"mr-8":"ml-8":"",initial:{opacity:0,height:0,overflow:"hidden"},animate:{opacity:d?1:0,height:d?"auto":0},transition:{duration:.15},children:r})})]})};S.displayName="MenuCollapse";const V=t=>{const{label:s,children:r,className:o}=t,{sideCollapsed:l}=p.useContext(K),a=g("menu-group",o);return e.jsxs("div",{className:a,children:[s&&!l&&e.jsx("div",{className:g("menu-title"),children:s}),e.jsx(Z,{value:null,children:e.jsx("ul",{children:r})})]})};V.displayName="MenuGroup";const y=W;y.MenuItem=w;y.MenuCollapse=S;y.MenuGroup=V;const k=({icon:t})=>typeof t!="string"&&!t?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:A[t]&&e.jsx("span",{className:"text-2xl",children:A[t]})}),{MenuItem:te}=y,se=({nav:t,children:s,direction:r,renderAsIcon:o,onLinkClick:l,userAuthority:u,t:a,currentKey:c})=>e.jsx(M,{userAuthority:u,authority:t.authority,children:o?e.jsx(J,{title:a(t.translateKey,t.title),placement:r==="rtl"?"left":"right",children:s}):e.jsx(D.Item,{active:c===t.key,children:t.path?e.jsx(_,{className:"h-full w-full flex items-center outline-hidden",to:t.path,target:t.isExternalLink?"_blank":"",onClick:()=>l==null?void 0:l({key:t.key,title:t.title,path:t.path}),children:e.jsx("span",{children:a(t.translateKey,t.title)})}):e.jsx("span",{children:a(t.translateKey,t.title)})})}),b=t=>{const{nav:s,onLinkClick:r,showTitle:o,indent:l,showIcon:u=!0,userAuthority:a,t:c}=t;return e.jsx(M,{userAuthority:a,authority:s.authority,children:e.jsx(te,{eventKey:s.key,dotIndent:l,children:e.jsxs(_,{to:s.path,className:"flex items-center gap-2 h-full w-full",target:s.isExternalLink?"_blank":"",onClick:()=>r==null?void 0:r({key:s.key,title:s.title,path:s.path}),children:[u&&e.jsx(k,{icon:s.icon}),o&&e.jsx("span",{children:c(s.translateKey,s.title)})]})},s.key)})},ne=({nav:t,onLinkClick:s,sideCollapsed:r,direction:o,indent:l,renderAsIcon:u,userAuthority:a,showIcon:c,showTitle:m,t:x,currentKey:d,parentKeys:n})=>e.jsx(e.Fragment,{children:r?e.jsx(se,{currentKey:d,parentKeys:n,nav:t,direction:o,renderAsIcon:u,userAuthority:a,t:x,onLinkClick:s,children:e.jsx(b,{nav:t,sideCollapsed:r,userAuthority:a,showIcon:c,showTitle:m,t:x,onLinkClick:s})}):e.jsx(b,{nav:t,sideCollapsed:r,userAuthority:a,showIcon:c,showTitle:m,indent:l,t:x,onLinkClick:s})}),{MenuItem:le,MenuCollapse:re}=y,oe=({nav:t,indent:s,dotIndent:r,children:o,userAuthority:l,t:u})=>e.jsx(M,{userAuthority:l,authority:t.authority,children:e.jsx(re,{label:e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:t.icon}),e.jsx("span",{children:u(t.translateKey,t.title)})]}),eventKey:t.key,expanded:!1,dotIndent:r,indent:s,children:o},t.key)}),ae=({nav:t,direction:s,children:r,t:o,renderAsIcon:l,userAuthority:u,parentKeys:a})=>{const c=e.jsx(le,{isActive:a==null?void 0:a.includes(t.key),eventKey:t.key,className:"mb-2",children:e.jsx(k,{icon:t.icon})},t.key),m=e.jsx("div",{children:o(t.translateKey,t.title)},t.key);return e.jsx(M,{userAuthority:u,authority:t.authority,children:e.jsx(D,{trigger:"hover",renderTitle:l?c:m,placement:s==="rtl"?"left-start":"right-start",children:r})})},ie=({sideCollapsed:t,...s})=>t?e.jsx(ae,{...s}):e.jsx(oe,{...s}),{MenuGroup:ue}=y,E=2,he=t=>{const{collapsed:s,routeKey:r,navigationTree:o=[],onMenuItemClick:l,direction:u=F.direction,translationSetup:a,userAuthority:c}=t,{t:m}=Y(!a),[x,d]=p.useState([]),{activedRoute:n}=O(o,r);p.useEffect(()=>{n!=null&&n.parentKey&&d([n==null?void 0:n.parentKey])},[n==null?void 0:n.parentKey]);const C=()=>{l==null||l()},j=(I,h=0,N)=>{const f=h+1;return e.jsx(e.Fragment,{children:I.map(i=>e.jsxs(p.Fragment,{children:[i.type===z&&e.jsx(ne,{currentKey:n==null?void 0:n.key,parentKeys:x,nav:i,sideCollapsed:s,direction:u,indent:N,renderAsIcon:h<=0,showIcon:h<=0,userAuthority:c,showTitle:s?h>=1:h<=E,t:m,onLinkClick:C},i.key),i.type===X&&e.jsx(ie,{currentKey:n==null?void 0:n.key,parentKeys:x,nav:i,sideCollapsed:s,direction:u,indent:f>=E,dotIndent:f>=E,renderAsIcon:f<=1,userAuthority:c,t:m,onLinkClick:l,children:i.subMenu&&i.subMenu.length>0&&j(i.subMenu,f,!0)},i.key),i.type===q&&e.jsx(M,{userAuthority:c,authority:i.authority,children:e.jsx(ue,{label:m(i.translateKey)||i.title,children:i.subMenu&&i.subMenu.length>0&&j(i.subMenu,h,!1)},i.key)})]},i.key))})};return e.jsx(y,{className:"px-4 pb-4",sideCollapsed:s,defaultActiveKeys:n!=null&&n.key?[n.key]:[],defaultExpandedKeys:x,defaultCollapseActiveKeys:n!=null&&n.parentKey?[n.parentKey]:[],children:j(o,0)})};export{y as M,he as V};
