import{V as q,r as h,j as e,W as z,R as G,T as R}from"./index-CEOp8n-h.js";import{u as O,F as V,C as m,I as o}from"./index.esm-DMG4dskv.js";import{t as $,F as i,z as n}from"./index-De1RsOKa.js";import{B as I}from"./Button-n0uSCgLH.js";import{C as K}from"./Card-Ckj53LZv.js";import{B as Z}from"./BottomStickyBar-BQRXMH2Q.js";import{u as _,A as H}from"./useTimeOutMessage-BDfsJ27C.js";import"./isNil-DgkzzQHs.js";import"./classNames-DBK2iPR4.js";import"./CloseButton-lThVRAn8.js";import"./index-CxDidC2g.js";import"./StatusIcon-BHeKs6_f.js";const J=t=>n.object({name:n.string().min(4,"Name Required"),email:n.string().nullish(),phone:n.string().nullish(),city:n.string().nullish(),state:n.string().nullish(),address:n.string().nullish(),pin:n.string().nullish(),gstin:n.string().nullish(),username:n.string().min(4,"Too Short!").max(12,"Too Long!"),password:t?n.string().nullish():n.string().min(1,{message:"Password Required"}).min(6,{message:"Too Short!"}).refine(p=>/^[A-Za-z0-9_-]*$/.test(p),"Only Letters & Numbers Allowed")});async function Q(t){return R.fetchDataWithAxios({url:"/create-sku",method:"post",data:t})}async function X(t){return R.fetchDataWithAxios({url:`/get-sku/${t}`,method:"get"})}const ce=()=>{var f,y,b,S,v,C,N,B,w,A;const{id:t}=q(),[p,g]=h.useState(!!t),[j,D]=h.useState(null);h.useEffect(()=>{t&&(g(!0),X(t).then(s=>{u(s)}).catch(s=>{var c;D(((c=s==null?void 0:s.response)==null?void 0:c.data)||s.toString())}).finally(()=>{g(!1)}))},[]);const{handleSubmit:L,reset:u,formState:{errors:r},setError:U,control:l}=O({defaultValues:{name:"",email:"",phone:"",city:"",state:"",address:"",pin:"",gstin:"",username:"",password:""},resolver:$(J(t))}),[x,d]=_(),W=async s=>{var k,M,P,T,E,F;try{t&&(s.id=t);const a=await Q(s);a&&(d==null||d({text:(a==null?void 0:a.message)||"Successfully Saved",type:"success"}),t||u())}catch(a){d==null||d({text:((M=(k=a==null?void 0:a.response)==null?void 0:k.data)==null?void 0:M.message)||a.message.toString()||a.toString(),type:"danger"});for(var c in(T=(P=a==null?void 0:a.response)==null?void 0:P.data)==null?void 0:T.errors)U(c,{type:"manual",message:(F=(E=a==null?void 0:a.response)==null?void 0:E.data)==null?void 0:F.errors[c]})}};return j?e.jsx("div",{children:j.message}):e.jsx(e.Fragment,{children:p?e.jsx(z,{loading:!0}):e.jsxs(V,{onSubmit:L(W),children:[e.jsxs(K,{children:[x&&e.jsx(H,{showIcon:!0,className:"mb-4",type:x.type,children:e.jsx("span",{className:"break-all",children:x.text})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{asterisk:!0,label:"Name",invalid:!!r.name,errorMessage:(f=r.name)==null?void 0:f.message,children:e.jsx(m,{name:"name",control:l,render:({field:s})=>e.jsx(o,{type:"text",autoComplete:"off",placeholder:"SKU Name",...s})})}),e.jsx(i,{label:"Email",invalid:!!r.email,errorMessage:(y=r.email)==null?void 0:y.message,children:e.jsx(m,{name:"email",control:l,render:({field:s})=>e.jsx(o,{type:"email",autoComplete:"off",placeholder:"e-mail",...s})})}),e.jsx(i,{label:"Phone",invalid:!!r.phone,errorMessage:(b=r.phone)==null?void 0:b.message,children:e.jsx(m,{name:"phone",control:l,render:({field:s})=>e.jsx(o,{type:"number",autoComplete:"off",placeholder:"Phone Number",...s})})}),e.jsx(i,{label:"City",invalid:!!r.city,errorMessage:(S=r.city)==null?void 0:S.message,children:e.jsx(m,{name:"city",control:l,render:({field:s})=>e.jsx(o,{type:"text",autoComplete:"off",placeholder:"City Name",...s})})}),e.jsx(i,{label:"State",invalid:!!r.state,errorMessage:(v=r.state)==null?void 0:v.message,children:e.jsx(m,{name:"state",control:l,render:({field:s})=>e.jsx(o,{type:"text",autoComplete:"off",placeholder:"State Name",...s})})})]}),e.jsxs("div",{children:[e.jsx(i,{label:"Address",invalid:!!r.address,errorMessage:(C=r.address)==null?void 0:C.message,children:e.jsx(m,{name:"address",control:l,render:({field:s})=>e.jsx(o,{type:"text",autoComplete:"off",placeholder:"Address",...s})})}),e.jsx(i,{label:"Pin",invalid:!!r.pin,errorMessage:(N=r.pin)==null?void 0:N.message,children:e.jsx(m,{name:"pin",control:l,render:({field:s})=>e.jsx(o,{type:"number",autoComplete:"off",placeholder:"Pin Number",...s})})}),e.jsx(i,{label:"GSTIN",invalid:!!r.gstin,errorMessage:(B=r.gstin)==null?void 0:B.message,children:e.jsx(m,{name:"gstin",control:l,render:({field:s})=>e.jsx(o,{type:"text",autoComplete:"off",placeholder:"GSTIN",...s})})}),e.jsx(i,{label:"Â ",children:e.jsx(o,{style:{visibility:"hidden"}})}),e.jsx(i,{asterisk:!0,label:"Username",invalid:!!r.username,errorMessage:(w=r.username)==null?void 0:w.message,children:e.jsx(m,{name:"username",control:l,render:({field:s})=>e.jsx(o,{type:"text",autoComplete:"off",placeholder:"Username",...s})})}),e.jsx(i,{asterisk:!0,label:"Password",invalid:!!r.password,errorMessage:(A=r.password)==null?void 0:A.message,children:e.jsx(m,{name:"password",control:l,render:({field:s})=>e.jsx(o,{type:"password",autoComplete:"off",placeholder:"Password",...s})})})]})]})]}),e.jsx(Z,{children:e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx("span",{}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{type:"reset",className:"ltr:mr-2 rtl:ml-2",onClick:()=>u(),children:"Reset"}),e.jsx(I,{variant:"solid",type:"submit",children:"Submit"})]})]})})})]})})};export{ce as default};
