import{P as M,r as n,u as D,j as e,X as z,c as w,T as A}from"./index-CuiB96Qo.js";import{T as j}from"./index-B73IHBgx.js";import{u as B,g as O,a as k,b as E,c as I,T as Y,P as _}from"./index-DcoMAlQi.js";import{S as H}from"./Select-CydRxGxX.js";import{e as q,m as F}from"./index-jrXI8D10.js";import{C as W}from"./Card-BflYv3nG.js";import{B as c}from"./Button-CXMcmXiq.js";import{B as G}from"./Badge-DLplFRdc.js";import{T as L,A as Q}from"./index-Bqv9Dutx.js";import{D as V}from"./Dialog-Cfor8ZhL.js";import{S as X}from"./ScrollBar-Dd27R7Ly.js";import"./classNames-BqeNdLPR.js";import"./useControllableState-DKIFDlkX.js";import"./floating-ui.dom-LEYkgCgu.js";import"./CloseButton-qT4BxCM3.js";const{Tr:g,Th:a,Td:t,THead:$,TBody:J}=j;async function K(r){return A.fetchDataWithAxios({url:`/get-sales-list/${r}`,method:"get"})}const x=[{value:10,label:"10 / page"},{value:20,label:"20 / page"},{value:30,label:"30 / page"},{value:40,label:"40 / page"},{value:50,label:"50 / page"}],ge=()=>{const r=M(),[d,u]=n.useState([]),[p,f]=n.useState(!0),[m,v]=n.useState(null),[o,b]=n.useState([]),[S,l]=n.useState(!1),{user:N}=D();n.useEffect(()=>{K(N.id).then(s=>{u(s)}).catch(s=>{var h;v(((h=s==null?void 0:s.response)==null?void 0:h.data)||s.toString())}).finally(()=>{f(!1)})},[]);const C=d.length,i=B({data:d,getCoreRowModel:I(),getFilteredRowModel:E(),getPaginationRowModel:k(),getSortedRowModel:O()}),P=s=>{i.setPageIndex(s-1)},y=(s=0)=>{i.setPageSize(Number(s))},T=s=>{b(s),l(!0)},R=s=>{r("/user/invoice2",{state:s})};return m?e.jsx("div",{children:m.message}):e.jsxs("div",{children:[e.jsxs(W,{children:[e.jsxs(j,{children:[e.jsx($,{children:e.jsxs(g,{children:[e.jsx(a,{children:"Sl No"}),e.jsx(a,{children:"Name"}),e.jsx(a,{children:"Phone"}),e.jsx(a,{children:"City"}),e.jsx(a,{children:"Amount"}),e.jsx(a,{children:"Items"}),e.jsx(a,{children:"Date"}),e.jsx(a,{children:"Action"})]})}),p?e.jsx(Y,{columns:6,rows:10,avatarInColumns:[2,3,5],avatarProps:{width:28,height:28}}):e.jsx(J,{children:i.getRowModel().rows.map(s=>e.jsxs(g,{children:[e.jsx(t,{children:s.index+1}),e.jsx(t,{className:s.original.myshopee_order_id?"text-blue-500":"",children:s.original.name}),e.jsx(t,{children:s.original.phone}),e.jsx(t,{children:s.original.city}),e.jsx(t,{children:s.original.amount}),e.jsx(t,{children:e.jsx("div",{className:"flex items-center",children:e.jsx(G,{className:"mr-2",innerClass:"bg-blue-500",content:s.original.items.length,children:e.jsx(L,{title:"View items",children:e.jsx(c,{onClick:()=>T(s.original.items),shape:"circle",size:"sm",icon:e.jsx(q,{})})})})})}),e.jsx(t,{children:z.unix(s.original.created_at).format("D MMM, YYYY h:mm a")}),e.jsx(t,{children:e.jsx(c,{onClick:()=>R(s.original),shape:"circle",size:"sm",icon:e.jsx(F,{})})})]},s.original.id))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx(_,{pageSize:i.getState().pagination.pageSize,currentPage:i.getState().pagination.pageIndex+1,total:C,onChange:P}),e.jsx("div",{style:{minWidth:130},children:e.jsx(H,{size:"sm",isSearchable:!1,value:x.filter(s=>s.value===i.getState().pagination.pageSize),options:x,onChange:s=>y(s==null?void 0:s.value)})})]})]}),e.jsxs(V,{isOpen:S,onClose:()=>l(!1),onRequestClose:()=>l(!1),children:[e.jsx("div",{className:"text-center mb-6",children:e.jsx("h4",{className:"mb-1",children:"Ordered items"})}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"mb-6",children:e.jsx(X,{className:w("overflow-y-auto h-80"),children:o==null?void 0:o.map(s=>e.jsxs("div",{className:"py-3 pr-5 rounded-lg flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{size:"lg",shape:"round",src:s.img_url}),e.jsxs("div",{children:[e.jsx("p",{className:"heading-text font-bold",children:s.name}),e.jsxs("p",{children:["Price: â‚¹",s.amount]})]})]})}),e.jsxs("div",{children:["Qnt:",e.jsx("span",{className:"heading-text font-bold",children:s.quantity})]})]},s.id))})})}),e.jsx(c,{block:!0,type:"button",variant:"solid",onClick:()=>l(!1),children:"Close"})]})]})};export{ge as default};
