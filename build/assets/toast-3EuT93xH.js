import{r as m,t as y,j as i,ak as A,al as S}from"./index-BpDlu5yh.js";import{u as D,S as W}from"./StatusIcon-eCXyWrtC.js";import{C as B,m as _}from"./CloseButton-CIzspcYR.js";const Z=e=>{const{className:t,children:n,closable:a=!1,customIcon:o,duration:l=3e3,onClose:c,style:r,ref:s,title:p,triggerByToast:d,type:f,width:j=350,...x}=e,[k,v]=m.useState("show"),{clear:N}=D(c,l,l>0),w=m.useCallback(T=>{v("hiding"),c==null||c(T),N(),d||setTimeout(()=>{v("hide")},400)},[c,N,d]),u=y("notification",t);return k==="hide"?null:i.jsxs("div",{ref:s,...x,className:u,style:{width:j,...r},children:[i.jsxs("div",{className:y("notification-content",!n&&"no-child"),children:[f&&!o?i.jsx("div",{className:"mr-3 mt-0.5",children:i.jsx(W,{type:f})}):null,o&&i.jsx("div",{className:"mr-3",children:o}),i.jsxs("div",{className:"mr-4",children:[p&&i.jsx("div",{className:y("notification-title",n?"mb-2":""),children:p}),i.jsx("div",{className:y("notification-description",!p&&n?"mt-1":""),children:n})]})]}),a&&i.jsx(B,{className:"notification-close",absolute:!0,onClick:w})]})};function F(...e){return e.filter(t=>t!==null&&typeof t<"u").reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===void 0?n:function(...o){t.apply(this,o),n.apply(this,o)}},void 0)}const O=({offsetX:e,offsetY:t,placement:n,transitionType:a})=>a==="fade"?H(e,t)[n]:z(e,t)[n],h={initial:{opacity:0,transform:"scale(0.75)"},animate:{transform:"scale(1)",opacity:1},exit:{opacity:0,transform:"scale(0.75)"}},b={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},z=(e,t)=>({"top-end":{default:{top:t,right:e},variants:{...h}},"top-start":{default:{top:t,left:e},variants:{...h}},"top-center":{default:{top:t,left:"50%",transform:"translateX(-50%)"},variants:{...h}},"bottom-end":{default:{bottom:t,right:e},variants:{...h}},"bottom-start":{default:{bottom:t,left:e},variants:{...h}},"bottom-center":{default:{bottom:t,left:"50%",transform:"translateX(-50%)"},variants:{...h}}}),H=(e,t)=>({"top-end":{default:{top:t,right:e},variants:{...b}},"top-start":{default:{top:t,left:e},variants:{...b}},"top-center":{default:{top:t,left:"50%",transform:"translateX(-50%)"},variants:{...b}},"bottom-end":{default:{bottom:t,right:e},variants:{...b}},"bottom-start":{default:{bottom:t,left:e},variants:{...b}},"bottom-center":{default:{bottom:t,left:"50%",transform:"translateX(-50%)"},variants:{...b}}}),K=e=>{const[t,n]=m.useState([]),a=m.useCallback(r=>(typeof r>"u"&&t.length&&(r=t[t.length-1].key),r),[t]),o=m.useCallback(r=>{const s=e||"_"+Math.random().toString(36).substr(2,12);return n([...t,{key:s,visible:!0,node:r}]),s},[t,e]),l=m.useCallback(()=>{n(t.map(r=>({...r,visible:!1}))),setTimeout(()=>{n([])},50)},[t]),c=m.useCallback(r=>{n(t.map(s=>(s.key===a(r)&&(s.visible=!1),s))),setTimeout(()=>{n(t.filter(s=>s.visible))},50)},[t,a]);return{messages:t,push:o,removeAll:l,remove:c}},C=e=>{const t=m.useRef(null),{transitionType:n="scale",placement:a=A.TOP_END,offsetX:o=30,offsetY:l=30,messageKey:c,block:r=!1,ref:s,callback:p,...d}=e,{push:f,removeAll:j,remove:x,messages:k}=K(c);m.useImperativeHandle(s,()=>({root:t.current,push:f,removeAll:j,remove:x}));const v=O({offsetX:o,offsetY:l,placement:a,transitionType:n}),N={triggerByToast:!0,...d},w=k.map(u=>{var T,P,I,M;return i.jsx(_.div,{className:"toast-wrapper",initial:v.variants.initial,variants:v.variants,animate:u.visible?"animate":"exit",transition:{duration:.15,type:"tween"},children:m.cloneElement(u.node,{...N,ref:s,onClose:F((P=(T=u.node)==null?void 0:T.props)==null?void 0:P.onClose,()=>x(u.key)),className:y((M=(I=u.node)==null?void 0:I.props)==null?void 0:M.className)})},u.key)});return i.jsx("div",{style:v.default,...d,ref:u=>{t.current=u,p==null||p(u)},className:y("toast",r&&"w-full"),children:w})};C.getInstance=e=>{const{wrapper:t,...n}=e,a=m.createRef(),o=(typeof t=="function"?t():t)||document.body;return new Promise(l=>{const c=()=>{l([a,s])};function r(p){const d=document.createElement("div");o.appendChild(d);const f=S.createRoot(d);return f.render(p),f}const{unmount:s}=r(i.jsx(C,{...n,ref:a,callback:c}))})};const L={placement:A.TOP_END,offsetX:30,offsetY:30,transitionType:"scale",block:!1},R="default",g=new Map;function q(e){if(/\top\b/.test(e))return"top-full";if(/\bottom\b/.test(e))return"bottom-full"}async function G(e,t){const[n]=await C.getInstance(t);return g.set(e||R,n),n}function J(e){return g.size===0?null:g.get(e||R)}const E=e=>E.push(e);E.push=(e,t=L)=>{let n=t.placement;t.block&&(n=q(t.placement));const a=J(n);return a!=null&&a.current?a.current.push(e):G(n??"",t).then(o=>{var l;return(l=o.current)==null?void 0:l.push(e)})};E.remove=e=>{g.forEach(t=>{t.current.remove(e)})};E.removeAll=()=>{g.forEach(e=>e.current.removeAll())};export{Z as N,E as t};
