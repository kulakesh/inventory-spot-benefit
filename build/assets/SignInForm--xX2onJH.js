import{r as P,u as v,j as e,c as F}from"./index-OsGwFNMQ.js";import{u as B,F as C,C as g,I as E}from"./index.esm-q56EOpBZ.js";import{B as q}from"./Button-Dprv1Vtg.js";import{F as f,t as N,z as i}from"./index-aJEhh47g.js";import{P as _}from"./PasswordInput-Brw1Njw8.js";const k=i.object({email:i.string({required_error:"Please enter your email"}).min(1,{message:"Please enter your email"}),password:i.string({required_error:"Please enter your password"}).min(1,{message:"Please enter your password"})}),V=w=>{var u,p,c;const[n,l]=P.useState(!1),{disableSubmit:x=!1,className:b,setMessage:o,passwordHint:m,authority:t}=w,{handleSubmit:S,formState:{errors:s},control:d}=B({defaultValues:{email:t=="user"?"test123":"web",password:t=="user"?"111111":"restore"},resolver:N(k)}),{signIn:j}=v(),h=async r=>{const{email:y,password:I}=r;if(!x){l(!0);const a=await j({email:y,password:I,authority:t});(a==null?void 0:a.status)==="failed"&&(o==null||o(a.message))}l(!1)};return e.jsx("div",{className:b,children:e.jsxs(C,{onSubmit:S(h),children:[e.jsx(f,{label:"Email",invalid:!!s.email,errorMessage:(u=s.email)==null?void 0:u.message,children:e.jsx(g,{name:"email",control:d,render:({field:r})=>e.jsx(E,{type:"text",placeholder:"Email",autoComplete:"off",...r})})}),e.jsx(f,{label:"Password",invalid:!!s.password,errorMessage:(p=s.password)==null?void 0:p.message,className:F(m?"mb-0":"",(c=s.password)!=null&&c.message?"mb-8":""),children:e.jsx(g,{name:"password",control:d,rules:{required:!0},render:({field:r})=>e.jsx(_,{type:"text",placeholder:"Password",autoComplete:"off",...r})})}),m,e.jsx(q,{block:!0,loading:n,variant:"solid",type:"submit",children:n?"Signing in...":"Sign In"})]})})};export{V as S};
