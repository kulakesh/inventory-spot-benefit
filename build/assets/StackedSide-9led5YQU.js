import{u as R,r as k,i as f,j as e,a as g,H as K,b as T,S as H,c as w,D as E,d as M,e as v,f as L,g as V,h as O,k as U,l as $}from"./index-yh3mfxzJ.js";import{L as P}from"./Logo-Dv8en_nY.js";import{M as N,V as F}from"./VerticalMenuContent-BaQ9r1IQ.js";import{S as C}from"./ScrollBar-1pk9O7IT.js";import{u as Y,N as B,A as G,n as A,a as W,b as q,H as z,S as J,U as Q,M as X}from"./UserProfileDropdown-J4kYJ5ei.js";import{H as Z,a as ee}from"./index-BHnhLCbU.js";import{u as I}from"./useResponsive-dAG-breB.js";import{L as te}from"./LayoutBase-CEZ2VxU5.js";import"./CloseButton-DZ0NwoaT.js";import"./index-B3_UeuDl.js";import"./floating-ui.dom-oVtnDDg4.js";import"./_getPrototype-DNhsW8zt.js";import"./classNames-B_J8Bb5h.js";import"./useControllableState-C0z_sNIq.js";import"./isNil-qwt3KJUT.js";import"./useUniqueId-CjpLY_Jf.js";import"./toString-sywB-dVD.js";const se=l=>{const{onChange:i,routeKey:a,activeKeys:o,onSetActiveKey:d,direction:u,navigationTree:n,userAuthority:c,mode:m,selectedMenu:h,t:y,...x}=l,{user:p}=R(),{includedRouteTree:r}=Y(n,a),S=({key:t,title:_,menu:D,translateKey:b})=>{i({title:_,menu:D,translateKey:b}),d([t])},j=({key:t})=>{i({}),d([t])};k.useEffect(()=>{r.type!==B&&!f(r)&&i({key:r.key,title:r.title,menu:r.subMenu,translateKey:r.translateKey})},[r.key]);const s=o&&o.length>0?o:f(h)?[]:[r.key];return e.jsxs("div",{...x,children:[e.jsx(g,{to:T.authenticatedEntryPath[p.authority[0]],className:"stacked-mini-nav-header flex items-center justify-center",style:{height:K},children:e.jsx(P,{imgClass:"max-h-10",mode:m,type:"streamline",className:H})}),e.jsx(C,{autoHide:!0,direction:u,children:e.jsx(N,{className:"px-4 pb-4",defaultActiveKeys:s,children:n.map(t=>e.jsx(G,{authority:t.authority,userAuthority:c,children:e.jsx("div",{title:y(t.translateKey,t.title),children:t.subMenu&&t.subMenu.length>0?e.jsx(N.MenuItem,{eventKey:t.key,className:"mb-2",onSelect:()=>S({key:t.key,title:t.title,menu:t.subMenu,translateKey:t.translateKey}),children:e.jsx("div",{className:"text-2xl",children:A[t.icon]})}):e.jsx(g,{to:t.path,className:"flex items-center h-full w-full",onClick:()=>j({key:t.key}),children:e.jsx(N.MenuItem,{eventKey:t.key,className:"mb-2",children:e.jsx("div",{className:"text-2xl",children:A[t.icon]})})})})},t.key))})})]})},ae=l=>{const{className:i,title:a,menu:o,routeKey:d,onCollapse:u,direction:n,translationSetup:c,userAuthority:m,...h}=l,y=()=>{u()};return e.jsxs("div",{className:w("h-full",i),...h,children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 pl-6 pr-4",style:{height:K},children:[e.jsx("h5",{className:"font-bold",children:a}),e.jsxs("button",{type:"button",className:"close-button",onClick:y,children:[n===E&&e.jsx(Z,{}),n===M&&e.jsx(ee,{})]})]}),e.jsx(C,{autoHide:!0,direction:n,children:e.jsx(F,{routeKey:d,navigationTree:o,translationSetup:c,userAuthority:m})})]})},ie={width:O},ne=({translationSetup:l=T.activeNavTranslation})=>{const{t:i}=W(!l),[a,o]=k.useState({}),[d,u]=k.useState([]),n=v(s=>s.mode),c=v(s=>s.direction),m=L(s=>s.currentRouteKey),h=V(s=>s.user.authority),{larger:y}=I(),x=(s,t)=>`${s}-${t}`,p=s=>{o(s)},r=()=>{o({}),u([])},S=s=>{u(s)},j=()=>{let s={};const t="-270px";return c===E&&(s={marginLeft:t}),c===M&&(s={marginRight:t}),s};return e.jsx(e.Fragment,{children:y.md&&e.jsxs("div",{className:"stacked-side-nav",children:[e.jsx(se,{className:`stacked-side-nav-mini ${x("stacked-side-nav-mini",n)}`,style:ie,routeKey:m,activeKeys:d,mode:n,direction:c,navigationTree:q,userAuthority:h||[],selectedMenu:a,t:i,onChange:p,onSetActiveKey:S}),e.jsx("div",{className:`stacked-side-nav-secondary ${x("stacked-side-nav-secondary",n)}`,style:{width:U,...f(a)?j():{}},children:!f(a)&&e.jsx(ae,{title:i(a.translateKey,a.title),menu:a.menu,routeKey:m,direction:c,translationSetup:l,userAuthority:h||[],onCollapse:r})})]})})},ve=({children:l})=>{const{larger:i,smaller:a}=I();return e.jsx(te,{type:$,className:"app-layout-stacked-side flex flex-auto flex-col",children:e.jsxs("div",{className:"flex flex-auto min-w-0",children:[i.lg&&e.jsx(ne,{}),e.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[e.jsx(z,{className:"shadow-sm dark:shadow-2xl",headerStart:e.jsx(e.Fragment,{children:a.lg&&e.jsx(X,{})}),headerEnd:e.jsxs(e.Fragment,{children:[e.jsx(J,{}),e.jsx(Q,{hoverable:!1})]})}),e.jsx("div",{className:"h-full flex flex-auto flex-col",children:l})]})]})})};export{ve as default};
