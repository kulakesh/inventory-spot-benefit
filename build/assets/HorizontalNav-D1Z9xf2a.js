import{e as ne,u as oe,j as e,a as O,b as Y,t as ie,c as f,r as y,f as ae,g as le}from"./index-yga5ZALA.js";import{L as ce}from"./Logo-DxFWBypa.js";import{u as de,a as ue,b as xe,c as he,d as pe,e as me,f as ge,s as ye,g as fe,h as je,i as ke,j as be,k as we,l as Ne,m as Ce,F as Me,n as Ee,o as Ie,p as Le,q as Fe,r as Te,t as Ke,v as Ae,A as U}from"./index-9mCR6niY.js";import{a as Pe}from"./floating-ui.dom-CBUvEmSM.js";import{A as b,n as w,N as L,d as V,D as H,a as He,u as Re,b as Se}from"./UserProfileDropdown-DpGdFH6s.js";import{T as N,a as ze}from"./useResponsive-ByQft7sJ.js";const Qe=({mode:n})=>{const i=ne(r=>r.mode),{user:o}=oe();return e.jsx(O,{to:Y.authenticatedEntryPath[o.authority[0]],children:e.jsx(ce,{imgClass:"max-h-10",mode:n||i,className:"hidden lg:block"})})},E=({path:n,children:i,isExternalLink:o,className:r,onClick:l})=>e.jsx(O,{className:ie("w-full flex items-center outline-0",r),to:n,target:o?"_blank":"",onClick:l,children:i}),R=n=>{const{className:i,active:o,asElement:r="button",...l}=n,u={className:f("font-semibold inline-flex h-9 w-max items-center justify-center rounded-lg bg-background px-4 py-2 dark:text-gray-300 dark:hover:text-gray-100 text-gray-900 hover:bg-gray-100 dark:hover:bg-white/10 transition-colors",i,o&&"bg-gray-100 hover:bg-gray-200 dark:bg-white/10 dark:hover:bg-white/20")};if(r==="a"){const{path:d,isExternalLink:a,...x}=l;return e.jsx(E,{path:d,isExternalLink:a,...u,...x})}return r==="button"?e.jsx("button",{ref:l.ref,...u,...l}):e.jsx(e.Fragment,{})},S=y.createContext({getItemProps:()=>({}),activeIndex:null,setActiveIndex:()=>{},setHasFocusInside:()=>{},isOpen:!1}),De=n=>{const{menuContent:i,triggerContent:o,dropdownLean:r}=n,[l,u]=y.useState(!1),[d,a]=y.useState(!1),[x,t]=y.useState(null),c=y.useRef([]),h=y.useRef([]),p=y.useContext(S),s=de(),m=ue(),j=xe(),C=he(),g=j!=null,{floatingStyles:$,refs:T,context:k}=pe({nodeId:m,open:l,onOpenChange:u,placement:g?"right-start":r?"bottom-start":"bottom",middleware:[Te({mainAxis:g?0:4,alignmentAxis:g?-4:0}),Ke(),Ae()],whileElementsMounted:Pe}),{isMounted:K,styles:B}=me(k,{common:({side:M})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[M]}),initial:{transform:"translateY(-5%)",opacity:0},duration:200,open:{opacity:1,transform:"translateY(0%)"},close:{opacity:0,transform:"translateY(-5%)"}}),G=ge(k,{enabled:g,handleClose:ye({blockPointerEvents:!0})}),J=fe(k,{event:"mousedown",toggle:!g,ignoreMouse:g}),Q=je(k,{role:"menu"}),W=ke(k,{bubbles:!0}),X=be(k,{listRef:c,activeIndex:x,nested:g,onNavigate:t}),Z=we(k,{listRef:h,onMatch:l?t:void 0,activeIndex:x}),{getReferenceProps:v,getFloatingProps:ee,getItemProps:te}=Ne([G,J,Q,W,X,Z]),I=()=>{u(!1)};y.useEffect(()=>{if(!s)return;function M(){I()}function A(P){P.nodeId!==m&&P.parentId===j&&I()}return s.events.on("click",M),s.events.on("menuopen",A),()=>{s.events.off("click",M),s.events.off("menuopen",A)}},[s,m,j]),y.useEffect(()=>{l&&s&&s.events.emit("menuopen",{parentId:j,nodeId:m})},[s,l,m,j]);const se=Ce([T.setReference,C.ref]),re={...v(p.getItemProps({...n,onFocus(){a(!1),p.setHasFocusInside(!0)}}))};return e.jsx(Me,{children:e.jsxs(Ee,{id:m,children:[o==null?void 0:o({ref:se,props:re,hasFocusInside:d,isOpen:K}),e.jsx(S.Provider,{value:{activeIndex:x,setActiveIndex:t,getItemProps:te,setHasFocusInside:a,isOpen:l},children:e.jsx(Ie,{elementsRef:c,labelsRef:h,children:K&&e.jsx(Le,{children:e.jsx(Fe,{context:k,modal:!1,initialFocus:g?-1:0,returnFocus:!g,children:e.jsx("div",{ref:T.setFloating,style:$,className:"outline-hidden z-30",...ee(),children:i==null?void 0:i({styles:B,handleDropdownClose:I})})})})})})]})})},F={1:{grid:"grid-cols-1",width:"w-[150px]"},2:{grid:"grid-cols-2",width:"w-[350px]"},3:{grid:"grid-cols-3",width:"w-[750px]"},4:{grid:"grid-cols-4",width:"w-[950px]"},5:{grid:"grid-cols-5",width:"w-[1150px]"}},q=({children:n,className:i,active:o,...r})=>e.jsx("div",{className:f("cursor-pointer font-semibold px-3 rounded-lg flex items-center w-full whitespace-nowrap gap-x-2 transition-colors duration-150 hover:text-gray-900 hover:bg-gray-100 dark:hover:text-gray-100 dark:hover:bg-gray-800",o&&"bg-gray-100 dark:bg-gray-800",i),role:"menuitem",...r,children:n}),z=({icon:n})=>typeof n!="string"&&!n?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:w[n]&&e.jsx("span",{className:"text-xl",children:w[n]||e.jsx(N,{})})}),D=({path:n,isExternalLink:i,onClick:o,icon:r,title:l,description:u,active:d})=>e.jsx(E,{path:n,isExternalLink:i,className:"gap-2 block",onClick:o,children:e.jsxs(q,{className:"py-2 px-2 gap-3",active:d,children:[e.jsx("div",{children:e.jsx(U,{className:f("bg-white dark:bg-transparent p-2 border-2 border-gray-200 dark:border-gray-600",d?"text-primary":"text-gray-900 dark:text-gray-100"),size:40,icon:r,shape:"round"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"heading-text font-bold",children:l}),e.jsx("div",{className:"text-xs truncate",children:u})]})]})}),_e=n=>{var x;const{navigationTree:i,t:o,onDropdownClose:r,columns:l=1,showColumnTitle:u=!0,routeKey:d,userAuthority:a}=n;return e.jsxs("div",{className:"flex max-w-[1400px] w-full",children:[e.jsx("div",{className:f("grid gap-y-6 gap-x-8 p-6 flex-1",(x=F[l])==null?void 0:x.grid),children:i.map(t=>t.subMenu.length>0?e.jsx(b,{userAuthority:a,authority:t.authority,children:e.jsxs("div",{className:"max-w-[250px]",children:[u&&e.jsx("div",{className:"heading-text font-bold mb-2",children:o(t.translateKey,t.title)}),t.subMenu.map(c=>{var h,p,s,m;return e.jsx(b,{userAuthority:a,authority:c.authority,children:e.jsx("div",{children:e.jsx(D,{path:c.path,isExternalLink:c.isExternalLink,icon:w[c.icon]||e.jsx(N,{}),title:o(c.translateKey,c.title),description:o(((p=(h=c.meta)==null?void 0:h.description)==null?void 0:p.translateKey)||"",((m=(s=c.meta)==null?void 0:s.description)==null?void 0:m.label)||""),active:c.key===d,onClick:r})},c.key)},c.key)})]})},t.key):null)}),i.some(t=>t.type===L)&&e.jsx("div",{className:f("ltr:border-l rtl:border-r border-gray-200 dark:border-gray-800 min-w-[280px] p-4 flex flex-col"),children:i.map(t=>{var c,h,p,s;return t.subMenu.length===0&&t.type===L?e.jsx(b,{userAuthority:a,authority:t.authority,children:e.jsx(D,{path:t.path,isExternalLink:t.isExternalLink,icon:w[t.icon]||e.jsx(N,{}),title:o(t.translateKey,t.title),description:o(((h=(c=t.meta)==null?void 0:c.description)==null?void 0:h.translateKey)||"",((s=(p=t.meta)==null?void 0:p.description)==null?void 0:s.label)||""),active:t.key===d,onClick:r},t.key)},t.key):null})})]})},_=({navigationTree:n,t:i,onDropdownClose:o,routeKey:r,userAuthority:l})=>{const u=(d,a)=>{const x=a+1;return e.jsx("div",{className:f(a===0&&"p-3"),children:d.map(t=>e.jsx(b,{userAuthority:l,authority:t.authority,children:e.jsxs("ul",{children:[t.type===L&&e.jsx(H.Item,{active:r===t.key,children:e.jsxs(E,{path:t.path,isExternalLink:t.isExternalLink,className:"gap-2 h-full",onClick:o,children:[e.jsx(z,{icon:t.icon}),e.jsx("span",{children:i(t.translateKey,t.title)})]})}),t.type===V&&e.jsx(H,{renderTitle:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(z,{icon:t.icon}),e.jsx("span",{children:i(t.translateKey,t.title)})]}),children:t.subMenu&&t.subMenu.length>0&&u(t.subMenu,x)})]})},t.key))})};return e.jsx(e.Fragment,{children:u(n,0)})},Oe=({navigationTree:n,t:i,onDropdownClose:o,columns:r,routeKey:l,userAuthority:u,routeParentKey:d})=>{var t,c,h,p;const[a,x]=y.useState(n.some(s=>s.key===d)?d:((t=n[0])==null?void 0:t.key)||"");return e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"p-4",children:n.map(s=>{var m,j,C,g;return s.subMenu.length>0?e.jsx(b,{userAuthority:u,authority:s.authority,children:e.jsx("div",{className:"min-w-[250px]",children:e.jsx("div",{children:e.jsxs(q,{className:"py-2 px-2 gap-3",active:s.key===a,onClick:()=>x(s.key),children:[e.jsx("div",{children:e.jsx(U,{className:f("bg-white dark:bg-transparent p-2 border-2 border-gray-200 dark:border-gray-600",s.key===l?"text-primary":"text-gray-900 dark:text-gray-100"),size:40,icon:w[s.icon]||e.jsx(N,{}),shape:"round"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"heading-text font-bold",children:i(s.translateKey,s.title)}),e.jsx("div",{className:"text-xs truncate",children:i(((j=(m=s.meta)==null?void 0:m.description)==null?void 0:j.translateKey)||"",((g=(C=s.meta)==null?void 0:C.description)==null?void 0:g.label)||"")})]})]})},s.key)})},s.key):null})}),n.some(s=>s.key===a&&s.type===V)&&e.jsx("div",{className:"ltr:border-l rtl:border-r border-gray-200 dark:border-gray-800 p-6",children:e.jsx("div",{className:f("grid gap-x-8 flex-1",(c=F[r])==null?void 0:c.grid,(h=F[r])==null?void 0:h.width),children:(p=n.find(s=>s.key===a))==null?void 0:p.subMenu.map(s=>e.jsx(b,{userAuthority:u,authority:s.authority,children:e.jsx(E,{path:s.path,isExternalLink:s.isExternalLink,className:"gap-2 group",onClick:()=>o(),children:e.jsxs("div",{className:f("flex items-center gap-2 h-[42px] heading-text group-hover:text-primary",l===s.key&&"text-primary"),children:[e.jsx("span",{className:"text-xl",children:w[s.icon]||e.jsx(N,{})}),e.jsx("span",{children:i(s.translateKey,s.title)})]})})},s.key))})})]})},Ye=n=>{const{style:i,navigationTree:o,layoutMeta:r,...l}=n;return e.jsxs("div",{className:"rounded-2xl bg-white dark:bg-gray-900 ring-0 shadow-[0px_48px_64px_-16px_rgba(0,0,0,0.25)] border border-gray-100 dark:border-gray-800 focus:outline-hidden min-w-[180px]",style:i,children:[(r==null?void 0:r.layout)==="default"&&e.jsx(_,{navigationTree:o,...l}),(r==null?void 0:r.layout)==="columns"&&e.jsx(_e,{navigationTree:o,columns:r.columns,showColumnTitle:r.showColumnTitle,...l}),(r==null?void 0:r.layout)==="tabs"&&e.jsx(Oe,{navigationTree:o,columns:r.columns,...l}),!r&&e.jsx(_,{navigationTree:o,...l})]})},Ue=n=>{const{routeKey:i,navigationTree:o=[],translationSetup:r,userAuthority:l}=n,{t:u}=He(!r),{activedRoute:d}=Re(o,i);return e.jsx("div",{className:"flex gap-1",children:o.map(a=>{var x,t;return e.jsx(b,{userAuthority:l,authority:a.authority,children:a.subMenu.length>0?e.jsx(De,{dropdownLean:((t=(x=a.meta)==null?void 0:x.horizontalMenu)==null?void 0:t.layout)==="default",triggerContent:({ref:c,props:h})=>e.jsx(R,{ref:c,...h,asElement:"button",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:u(a.translateKey,a.title)}),e.jsx(ze,{})]})}),menuContent:({styles:c,handleDropdownClose:h})=>{var p;return e.jsx(Ye,{style:c,navigationTree:a.subMenu,t:u,layoutMeta:(p=a==null?void 0:a.meta)==null?void 0:p.horizontalMenu,routeKey:i,routeParentKey:d==null?void 0:d.parentKey,userAuthority:l,onDropdownClose:h})}}):e.jsx(R,{...n,path:a.path,isExternalLink:a.isExternalLink,active:(d==null?void 0:d.key)===a.key,asElement:"a",children:e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("span",{children:u(a.translateKey,a.title)})})})},a.key)})})},We=({translationSetup:n=Y.activeNavTranslation})=>{const i=ae(r=>r.currentRouteKey),o=le(r=>r.user.authority);return e.jsx(Ue,{navigationTree:Se,routeKey:i,userAuthority:o||[],translationSetup:n})};export{We as H,Qe as a};
