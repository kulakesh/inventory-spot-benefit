import{u as R,r as k,i as f,j as e,a as g,H as K,b as T,S as H,c as w,D as E,d as M,e as v,f as L,g as V,h as O,k as U,l as $}from"./index-BNj8fUiy.js";import{L as P}from"./Logo-C2M0qSlm.js";import{M as N,V as F}from"./VerticalMenuContent-BXAW_UCg.js";import{S as C}from"./ScrollBar-CFqpy0a9.js";import{u as Y,N as B,A as G,n as A,a as W,b as q,H as z,S as J,U as Q,M as X}from"./UserProfileDropdown-xIl62-JY.js";import{H as Z,a as ee}from"./index-ChVQz1FO.js";import{u as I}from"./useResponsive-DZnJHQEA.js";import{L as te}from"./LayoutBase-CvE2ES8E.js";import"./CloseButton-CQFjuZ8w.js";import"./index-8bAB6iPB.js";import"./floating-ui.dom-Bn5o7SY4.js";import"./classNames-CZ6rT-ag.js";import"./useControllableState-C-Lq8RJw.js";import"./isNil-DhKjmTEW.js";const se=r=>{const{onChange:n,routeKey:a,activeKeys:o,onSetActiveKey:d,direction:u,navigationTree:i,userAuthority:c,mode:m,selectedMenu:h,t:y,...x}=r,{user:S}=R(),{includedRouteTree:l}=Y(i,a),j=({key:t,title:_,menu:D,translateKey:b})=>{n({title:_,menu:D,translateKey:b}),d([t])},p=({key:t})=>{n({}),d([t])};k.useEffect(()=>{l.type!==B&&!f(l)&&n({key:l.key,title:l.title,menu:l.subMenu,translateKey:l.translateKey})},[l.key]);const s=o&&o.length>0?o:f(h)?[]:[l.key];return e.jsxs("div",{...x,children:[e.jsx(g,{to:T.authenticatedEntryPath[S.authority[0]],className:"stacked-mini-nav-header flex items-center justify-center",style:{height:K},children:e.jsx(P,{imgClass:"max-h-10",mode:m,type:"streamline",className:H})}),e.jsx(C,{autoHide:!0,direction:u,children:e.jsx(N,{className:"px-4 pb-4",defaultActiveKeys:s,children:i.map(t=>e.jsx(G,{authority:t.authority,userAuthority:c,children:e.jsx("div",{title:y(t.translateKey,t.title),children:t.subMenu&&t.subMenu.length>0?e.jsx(N.MenuItem,{eventKey:t.key,className:"mb-2",onSelect:()=>j({key:t.key,title:t.title,menu:t.subMenu,translateKey:t.translateKey}),children:e.jsx("div",{className:"text-2xl",children:A[t.icon]})}):e.jsx(g,{to:t.path,className:"flex items-center h-full w-full",onClick:()=>p({key:t.key}),children:e.jsx(N.MenuItem,{eventKey:t.key,className:"mb-2",children:e.jsx("div",{className:"text-2xl",children:A[t.icon]})})})})},t.key))})})]})},ae=r=>{const{className:n,title:a,menu:o,routeKey:d,onCollapse:u,direction:i,translationSetup:c,userAuthority:m,...h}=r,y=()=>{u()};return e.jsxs("div",{className:w("h-full",n),...h,children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 pl-6 pr-4",style:{height:K},children:[e.jsx("h5",{className:"font-bold",children:a}),e.jsxs("button",{type:"button",className:"close-button",onClick:y,children:[i===E&&e.jsx(Z,{}),i===M&&e.jsx(ee,{})]})]}),e.jsx(C,{autoHide:!0,direction:i,children:e.jsx(F,{routeKey:d,navigationTree:o,translationSetup:c,userAuthority:m})})]})},ne={width:O},ie=({translationSetup:r=T.activeNavTranslation})=>{const{t:n}=W(!r),[a,o]=k.useState({}),[d,u]=k.useState([]),i=v(s=>s.mode),c=v(s=>s.direction),m=L(s=>s.currentRouteKey),h=V(s=>s.user.authority),{larger:y}=I(),x=(s,t)=>`${s}-${t}`,S=s=>{o(s)},l=()=>{o({}),u([])},j=s=>{u(s)},p=()=>{let s={};const t="-270px";return c===E&&(s={marginLeft:t}),c===M&&(s={marginRight:t}),s};return e.jsx(e.Fragment,{children:y.md&&e.jsxs("div",{className:"stacked-side-nav",children:[e.jsx(se,{className:`stacked-side-nav-mini ${x("stacked-side-nav-mini",i)}`,style:ne,routeKey:m,activeKeys:d,mode:i,direction:c,navigationTree:q,userAuthority:h||[],selectedMenu:a,t:n,onChange:S,onSetActiveKey:j}),e.jsx("div",{className:`stacked-side-nav-secondary ${x("stacked-side-nav-secondary",i)}`,style:{width:U,...f(a)?p():{}},children:!f(a)&&e.jsx(ae,{title:n(a.translateKey,a.title),menu:a.menu,routeKey:m,direction:c,translationSetup:r,userAuthority:h||[],onCollapse:l})})]})})},Ne=({children:r})=>{const{larger:n,smaller:a}=I();return e.jsx(te,{type:$,className:"app-layout-stacked-side flex flex-auto flex-col",children:e.jsxs("div",{className:"flex flex-auto min-w-0",children:[n.lg&&e.jsx(ie,{}),e.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[e.jsx(z,{className:"shadow-sm dark:shadow-2xl",headerStart:e.jsx(e.Fragment,{children:a.lg&&e.jsx(X,{})}),headerEnd:e.jsxs(e.Fragment,{children:[e.jsx(J,{}),e.jsx(Q,{hoverable:!1})]})}),e.jsx("div",{className:"h-full flex flex-auto flex-col",children:r})]})]})})};export{Ne as default};
